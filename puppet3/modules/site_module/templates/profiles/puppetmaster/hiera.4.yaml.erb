---
:backends:
<% if @use_hiera_eyaml_gpg == true -%>
  - eyaml
<% end -%>
  - yaml

:hierarchy:
  - "nodes/%{::fqdn}"
  - common

:yaml:
  :extension: 'yaml'
  :datadir: /etc/puppetlabs/code/environments/%{::environment}/hieradata

<% if @use_hiera_eyaml_gpg == true -%>
:eyaml:
  :extension: 'yaml'
  :datadir: /etc/puppetlabs/code/environments/%{::environment}/hieradata
  :encrypt_method: gpg
  :gpg_gnupghome: '/opt/puppetlabs/server/data/puppetserver/.gnupg'
<% end -%>

:merge_behavior: deeper
